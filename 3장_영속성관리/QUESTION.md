# 개념 정리 / 질문 및 답변

## 개념 정리
1. (P91) 커넥션 풀
  - 커넥션은 데이터베이스와 연결을 말한다.
  - 요청이 들어올때마다 데이터베이스에 연결하는 것(커넥션)은 비용이 많이 드는 작업중 하나며 매번 연결을 생성하고 해제하는 것은 비효율적이다. 
  - 그래서 커넥션 풀은 미리 데이터베이스 연결(커넥션)을 생성해두고 필요할 때마다 해당 연결을 재사용한다. 

2. (P91) 쓰레드 풀
  - 스레드는 프로세스 내에 실행되는 독립적인 실행 단위다. 
  - 각 스레드는 프로세스 내의 동일한 자원을 공유하면서 병렬적으로 실행될 수 있다.
  - 스레드를 생성하고 관리하는 것은 비용이 큰 작업이다.
  - 스레드 풀은 미리 일정 수의 스레드를 생성해두고 작업이 발생할 때마다 해당 스레드를 할당하여 작업을 수행한다.
  - 이렇게 함으로써 스레드 생성 및 해제의 오버헤드를 줄이고 동시에 여러 작업을 효율적으로 처리할 수 있다.

3. (P91)컨테이너
   - 컨테이너는 서버 환경에서 실행되는 애플리케이션 컴포넌트의 라이프사이클을 관리하고 서비스를 제공하는 소프트웨어 환경을 의미한다.

4. (P91)컨텍스트
   - 컨텍스트는 사용되는 문맥에 따라 의미가 달라진다. 작업공간이라고 생각하면 될거같다.


5. 프록시 객체
 - 프록시 객체는 실제 객체를 대신하는 객체다.
 - JPA에서는 주로 지연 로딩(Lazy Loading)을 구현하기 위해 프록시 객체를 사용한다.
 - 예를 들어, A 엔터티가 B 엔터티와 연관 관계를 가질 때, B를 지연 로딩으로 설정하면 A를 조회할 때 B 대신에 B를 나타내는 프록시 객체가 사용이된다.
 - 이 프록시 객체는 실제로 B의 데이터가 필요한 시점에 데이터베이스에서 B의 데이터를 로딩한다.
   
6. 지연 로딩
 - 지연 로딩(Lazy Loading)은 실제로 필요한 시점에 데이터를 로딩하는 기법이다.
 - 특히 JPA에서는 관계형 데이터베이스의 연관 관계에서 많이 사용된다.
 - 지연 로딩은 실제 객체 대신 프록시 객체를 로딩해두고 해당 객체를 실제 사용할 때 영속성 컨텍스트를 통해 데이터를 불러오는 방법이다.
 - 준영속 상태는 영속성 컨텍스트가 더는 관리하지 않으므로 지연 로딩 시 문제가 발생한다.

## 질문 및 답변

7. (P106) 재사용하지 말고 자연스럽게 가비지 컬렉션의 대상이 되도록 두는 것이 좋다는 말은 무슨 말일까?
   - JPA에서 엔터티를 삭제하면 그 엔터티는 더 이상 영속성 컨텍스트에서 관리되지 않는다.
   - 즉, 1차 캐시에서 제거되고 영속성 컨텍스트가 해당 엔터티를 더 이상 추적하지 않게 된다는 뜻이다.
   - 이때 삭제된 엔터티에 대한 참조를 유지하지 않도록 주의해야 한다.
   - 삭제된 엔터티에 대한 참조가 여전히 존재하면, 해당 엔터티는 가비지 컬렉션의 대상이 되지 않는다. (*)
   - 자연스럽게 가비지 컬렉션의 대상이 되도록 두어야 한다.
   - 참조를 유지하지 않으면 삭제된 엔터티는 자연스럽게 Java 가비지 컬렉터의 대상이 됩니다. (가비지 컬렉션에 맡겨 메모리에서 해제하는 것이 바람직)
   - 이것은 메모리 관리와 성능 향상을 위해 중요한 개념이다.
   - 삭제된 엔터티에 대한 참조를 계속 유지한다면, 해당 엔터티는 계속해서 메모리를 차지하게 되며, 이는 메모리 누수(memory leak)로 이어질 수 있다.
   - 
8. (7번) 가비지 컬렉터는 더 이상 사용되지 않는 객체를 감지하고 메모리에서 해제하는 시점이 언제일까?
   - 가비지 컬렉터는 언제 메모리에서 객체를 해제할지를 정확하게 예측하는 것은 어렵다고 한다.
   - 가비지 컬렉션은 JVM (Java Virtual Machine)의 일부로서, JVM이 메모리 상태 및 애플리케이션의 동작을 기반으로 가비지 컬렉션을 수행한다.
   - 가비지 컬렉션의 정확한 타이밍은 JVM 구현 및 환경에 따라 다를 수 있다.

9.(6번) A 엔터티가 B 엔터티와 지연 로딩으로 관계가 맺어져 있을 때 라는데 관계가 어떻게 맺는가?
 - 엔터티 간의 관계는 주로 JPA의 어노테이션을 사용하여 설정된다.
 - 예를 들어, @OneToOne, @OneToMany, @ManyToOne, @ManyToMany 등의 어노테이션을 사용하여 엔터티 간의 관계를 정의한다.

10.(6번) 준영속 상태는 영속성 컨텍스트가 더는 관리하지 않으므로 지연 로딩 시 문제가 발생할까?
  - LazyInitializationException는 지연 로딩이 설정된 엔터티의 연관된 컬렉션을 접근하려 할 때, 영속성 컨텍스트가 더 이상 해당 엔터티를 관리하지 않으면     서 지연 로딩을 수행할 수 없게 되어나는 오류다.

11. (p108) JPQL이나 같은 객체지향 쿼리를 호출하면 플러시가 발생되는데 그러면 em.find()는 플러시가 안될까?
 - 한 트랜잭션 안에서 find()로 데이터베이스 값을 가져오니까 플러시할 필요없지만 JPQL이나 같은 객체지향 쿼리를 호출하면
   데이터베이스에서 가져온 값이 아니라 객체를 가져왔으니 실제로 데이터베이스에 접근할 때 플러시를 시켜 동기화를 시키고 데이터값을 가져와 최신 결과가 반영된다.
