# 8장_프록시와 연관관계 관리

<b>✨설명 전 Point 잡고 가기✨</b> 

- 프록시와 즉시로딩,지연로딩
  - 객체는 객체 그래프로 연관된 객체들을 탐색한다.
  - 객체가 데이터베이스에 저장되어 있어 연관된 객체를 마음껏 탐색하기는 어려움이 있다.
  - 이런 어려움을 JPA 구현체들은 프록시라는 기술을 사용해서 해결했다.
  - 프록시를 사용하게 되면 연관된 객체를 처음부터 데이터베이스에서 조회하는 것이 아니라 실제 사용하는 시점에 데이터베이스에서 조회할 수 있다.
    (자주 사용되는 객체들은 실제 사용하는 시점이 아니라 조인을 통해서 미리 함께 조회하는 것이 효과적이다.)
  - JPA는 즉시로딩, 지연로딩 모두 지원한다. 
- 영속성 전이와 고아 객체
  - JPA는 연관된 객체를 함께 저장하거나 함께 삭제 할 수 있는 1) 영속성 전이와 2) 고아객체 제거라는 편리한 기능을 제공한다.

## 8.1 프록시
- 프록시 객체는 가짜 객체로, 지연로딩 기능을 사용할때 실제 엔티티 객체 대신에 데이터베이스 조회를 지연할 수 있게 해준다.
> JPA 표준 명세는 지연 로딩의 구현 방법을 JPA 구현체에게 위임했다.<br>
  JPA 구현체인 하이버네이트 구현체는 지연 로딩을 하기 위해 1) 프록시 사용 2) 바이트코드 수정 이렇게 두가지 방법에 대해 제공한다.

### 8.1.1 프록시 기초



## 8.2 즉시로딩과 지연로딩
## 8.3 지연로딩 활용
## 8.4 영속성 전이 : CASCADE
## 8.5 고아 객체
## 8.6 영속성 전이 + 고아 객체, 생명주기

```java
Member member = em.find (Member.class, "memberl") ;
```
- JPA에서 식별자로 엔티티 하나를 조회할 때는 EntityManager.find()를 사용한다.
- em.find() 메소드는 영속성 컨텍스트에 엔티티가 없으면 데이터베이스를 조회한다.
- 엔티티를 직접 조회하면 조회한 엔티티를 실제 사용하든 사용하지 않든 데이터베이스를 조회한다.

```java
Member member = em.getReference(Member.class, "memberl");
```
- EntityManager.getReference(); 메소드를 사용하면 엔티티를 실제 사용하는 시점까지 데이터베이스 조회를 미룰 수 있다.
- em.getRefernce();를 호출하면 JPA는 데이터베이스를 조회하지 않고 실제 엔티티 객체도 생성하지 않는다.
- 대신 데이터베이스 접근을 위한 프록시 객체를 반환한다.
- 
-----------------------------------------

```java

```
